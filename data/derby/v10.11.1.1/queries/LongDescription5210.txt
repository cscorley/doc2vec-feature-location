We should see if we could use a java.nio.ByteBuffer instead of a byte array in org.apache.derby.client.net.Request, similar to what we did for DDMWriter in DERBY-2936. ByteBuffer provides some helper methods that allows us to simplify the code that puts multi-byte values into the buffer (like ByteBuffer.putShort(), putInt(), putLong()). It may also be a first step on the way to using a CharsetEncoder to encode strings without going via an intermediate throw-away byte array (see DERBY-5068 for details).