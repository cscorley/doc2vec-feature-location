The subset of tests from DatabaseMetaDataTest being run as part of the upgrade tests is sensitive to changes in the database made by other tests. For instance, adding tables with foreign keys will make the test fail due to extra rows in system tables.

Usually this could be solved by using a single-use db wrapper of some sort, but in the upgrade tests the database will be booted several times with different versions of Derby and the data needs to be preserved between some of these boots.