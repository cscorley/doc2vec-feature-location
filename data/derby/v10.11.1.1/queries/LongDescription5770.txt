Currently the invalidation of statements accessing a table is issued before dropping the old statistics and writing new ones. While we cannot guarantee that all compilations will see the new statistics (we can currently only drop all statistics for an index, so we cannot add the new ones first and then drop the old ones), we can do the invalidation after the work has been done to reduce the chances that queries are compiled without statistics at all.