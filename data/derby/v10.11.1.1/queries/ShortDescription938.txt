ContextManager needs to be optimized